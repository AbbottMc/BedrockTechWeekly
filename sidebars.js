/**
 * Creating a sidebar enables you to:
 - create an ordered group of docs
 - render a sidebar for each doc of that group
 - provide next/previous navigation

 The sidebars can be generated from the filesystem, or explicitly defined here.

 Create as many sidebars as you want.
 */

const moduleNames = {
  'common': ['classes', 'interfaces'],
  'server': ['classes', 'interfaces', 'enums'],
  'server-ui': ['classes', 'enums'],
  'server-admin': ['classes'],
  'server-net': ['classes', 'enums'],
  'server-gametest': ['classes'],
  'server-editor': ['classes', 'interfaces', 'enums']
};
const genSapiModuleSidebar = function (path, moduleName, moduleParseResultItemNameArr) {
  const ret = {
    type: 'category',
    label: '@minecraft/' + moduleName,
    items: []
  };
  const itemLabelList = {
    'classes': '类',
    'interfaces': '接口',
    'enums': '枚举'
  };
  moduleParseResultItemNameArr.forEach((itemName) => {
    ret.items.push({
      type: 'category',
      label: itemLabelList[itemName],
      items: [
        {
          type: 'autogenerated',
          dirName: `sapi/${path}/${moduleName}/${itemName}`,
        }
      ]
    });
  });
  return ret;
}
const sapiModuleSidebarGenerator = function (isStable) {
  const path = isStable ? 'stable' : 'preview';
  const ret = [];
  for (const moduleNamesKey in moduleNames) {
    ret.push(genSapiModuleSidebar(path, moduleNamesKey, moduleNames[moduleNamesKey]));
  }
  return ret;
};

/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */
const sidebars = {
  // By default, Docusaurus generates a sidebar from the docs folder structure
  tutorialSidebar: [{type: 'autogenerated', dirName: 'official_changelog'}],
  sapiPreviewSidebar: [
    {
      type: 'doc',
      label: '脚本API文档', // 侧边栏标签
      id: 'sapi/preview/README'
    },
    ...sapiModuleSidebarGenerator(false)
  ],
  sapiStableSidebar: [
    {
      type: 'doc',
      label: '脚本API文档', // 侧边栏标签
      id: 'sapi/stable/README'
    },
    ...sapiModuleSidebarGenerator(true)
  ],
  sapiPreview: [],
  // But you can create a sidebar manually
  /*
  tutorialSidebar: [
    'intro',
    'hello',
    {
      type: 'category',
      label: 'Tutorial',
      items: ['tutorial-basics/create-a-document'],
    },
  ],
   */
};

module.exports = sidebars;
