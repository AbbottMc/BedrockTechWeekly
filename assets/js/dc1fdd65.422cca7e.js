"use strict";(self.webpackChunkbedrock_tech=self.webpackChunkbedrock_tech||[]).push([[40475],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=n.createContext({}),p=function(e){var t=n.useContext(m),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(m.Provider,{value:t},e.children)},s="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,m=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),s=p(a),d=r,u=s["".concat(m,".").concat(d)]||s[d]||k[d]||i;return a?n.createElement(u,l(l({ref:t},c),{},{components:a})):n.createElement(u,l({ref:t},c))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var o={};for(var m in t)hasOwnProperty.call(t,m)&&(o[m]=t[m]);o.originalType=e,o[s]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},30546:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>s,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={},l=void 0,o={unversionedId:"changelog_source/preview/1.20/0/20/tech_sapi_exp",id:"changelog_source/preview/1.20/0/20/tech_sapi_exp",title:"tech_sapi_exp",description:"-   System Events",source:"@site/docs/changelog_source/preview/1.20/0/20/tech_sapi_exp.md",sourceDirName:"changelog_source/preview/1.20/0/20",slug:"/changelog_source/preview/1.20/0/20/tech_sapi_exp",permalink:"/docs/changelog_source/preview/1.20/0/20/tech_sapi_exp",draft:!1,editUrl:"https://github.com/AbbottMc/BedrockTechWeekly/tree/master/docs/changelog_source/preview/1.20/0/20/tech_sapi_exp.md",tags:[],version:"current",frontMatter:{}},m={},p=[],c={toc:p};function s(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"System Events",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Further separation of events into distinct before","*"," and after","*"," handling, with some restrictions on the execution of state updates in a before event:"),(0,r.kt)("li",{parentName:"ul"},"All before events moved from ",(0,r.kt)("em",{parentName:"li"},"events")," into ",(0,r.kt)("em",{parentName:"li"},"world.beforeEvents"),' property. The "before" prefix has been removed. Functions that alter world state are prohibited in before event callbacks. Read-only methods and properties are allowed. Set methods are limited to the event object itself. Any use of restricted methods and properties will throw an exception.'),(0,r.kt)("li",{parentName:"ul"},"For example, ",(0,r.kt)("em",{parentName:"li"},"events.beforeWatchdogTerminate"),' is now considered a "before" event. Functions that alter world state are prohibited in before event callbacks. Read-only methods and properties are allowed. Set methods are limited to the event object itself. Any use of restricted methods and properties will throw an exception'),(0,r.kt)("li",{parentName:"ul"},"For example, ",(0,r.kt)("em",{parentName:"li"},"events.scriptEventReceived"),' is now considered an "after" event. After event callbacks are executed in a deferred manner. Using ',(0,r.kt)("em",{parentName:"li"},"/scriptEvent something")," will queue script to execute at a later point"))),(0,r.kt)("li",{parentName:"ul"},"Renamed Scripting Events",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Before Events renamed to ",(0,r.kt)("em",{parentName:"li"},"*","BeforeEvent")," and event signals renamed to ",(0,r.kt)("em",{parentName:"li"},"*","BeforeEventSignal"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Example: ",(0,r.kt)("em",{parentName:"li"},"BeforeItemUseEvent")," renamed to ",(0,r.kt)("em",{parentName:"li"},"ItemUseBeforeEvent")," and ",(0,r.kt)("em",{parentName:"li"},"BeforeItemUseEventSignal")," renamed to ",(0,r.kt)("em",{parentName:"li"},"ItemUseBeforeEventSignal")))),(0,r.kt)("li",{parentName:"ul"},"Other events renamed to ",(0,r.kt)("em",{parentName:"li"},"*","AfterEvent")," and event signals renamed to ",(0,r.kt)("em",{parentName:"li"},"*","AfterEventSignal"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Example: ",(0,r.kt)("em",{parentName:"li"},"WeatherChangedEvent")," renamed to ",(0,r.kt)("em",{parentName:"li"},"WeatherChangedAfterEvent")," and ",(0,r.kt)("em",{parentName:"li"},"WeatherChangedEventSignal")," renamed to ",(0,r.kt)("em",{parentName:"li"},"WeatherChangedAfterEventSignal")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"chat")," event renamed to ",(0,r.kt)("em",{parentName:"li"},"chatSend"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"events.beforeChat")," renamed to ",(0,r.kt)("em",{parentName:"li"},"world.events.beforeChatSend")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"events.chat")," renamed to ",(0,r.kt)("em",{parentName:"li"},"world.events.chatSend")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"BeforeChatEvent")," renamed to ",(0,r.kt)("em",{parentName:"li"},"ChatSendBeforeEvent")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"BeforeChatEventSignal")," renamed to ",(0,r.kt)("em",{parentName:"li"},"ChatSendBeforeEventSignal")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ChatEvent")," renamed to ",(0,r.kt)("em",{parentName:"li"},"ChatSendAfterEvent")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ChatEventSignal")," renamed to ",(0,r.kt)("em",{parentName:"li"},"ChatSendAfterEventSignal")))),(0,r.kt)("li",{parentName:"ul"},"Fixed a bug where ",(0,r.kt)("em",{parentName:"li"},"resolve()")," would fail to resolve custom block properties"),(0,r.kt)("li",{parentName:"ul"},"Renamed ",(0,r.kt)("em",{parentName:"li"},"scoreboard")," to ",(0,r.kt)("em",{parentName:"li"},"Entity.scoreboardIdentity")),(0,r.kt)("li",{parentName:"ul"},"Item Events",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("em",{parentName:"li"},"ItemStartUseOnEvent")," now only fires for the first block that is interacted with when performing a build action"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("em",{parentName:"li"},"ItemUseOnEvent")," now only fires if the item is successfully used on a block"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ItemUseOnEvent")," property ",(0,r.kt)("em",{parentName:"li"},"blockLocation: Vec3")," has been changed to ",(0,r.kt)("em",{parentName:"li"},"block: Block")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ItemStartUseOnEvent")," property ",(0,r.kt)("em",{parentName:"li"},"blockLocation: Vec3")," has been changed to ",(0,r.kt)("em",{parentName:"li"},"block: Block")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ItemStopUseOnEvent")," property ",(0,r.kt)("em",{parentName:"li"},"blockLocation: Vec3")," has been changed to ",(0,r.kt)("em",{parentName:"li"},"block: Block")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ProjectileHitEvent")," property ",(0,r.kt)("em",{parentName:"li"},"faceLocation: Vec2")," has been changed to ",(0,r.kt)("em",{parentName:"li"},"faceLocation: Vec3")," - This position is relative to the bottom north-west corner of the block"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"ItemUseOnEvent")," property ",(0,r.kt)("em",{parentName:"li"},"faceLocation: Vec2")," has been changed to ",(0,r.kt)("em",{parentName:"li"},"faceLocation: Vec3")," - This position is relative to the bottom north-west corner of the block"))),(0,r.kt)("li",{parentName:"ul"},"Entity",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Added interface ",(0,r.kt)("em",{parentName:"li"},"teleportOptions {dimension?: Dimension, rotation?: Vector2, keepVelocity?: boolean, facingLocation?: Vector3, checkForBlocks?: boolean}")),(0,r.kt)("li",{parentName:"ul"},"Added interface ",(0,r.kt)("em",{parentName:"li"},"Vector2 {x: number, y: number}")),(0,r.kt)("li",{parentName:"ul"},"Added function ",(0,r.kt)("em",{parentName:"li"},"tryTeleport(location: Vector3, teleportOptions?: teleportOptions) : boolean")," - Attempts to teleport the entity and returns false if the entity is unable to teleport safely (blocks surrounding teleport location or unloaded chunk)"),(0,r.kt)("li",{parentName:"ul"},"Changed function ",(0,r.kt)("em",{parentName:"li"},"teleport")," to ",(0,r.kt)("em",{parentName:"li"},"teleport(location: Vector3, teleportOptions?: teleportOptions) : void")," - Teleports an entity"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Changed function setRotation to setRotation(rotation: Vector2) : void")," - Sets the entity's rotation"),(0,r.kt)("li",{parentName:"ul"},"Changed function ",(0,r.kt)("em",{parentName:"li"},"getRotation")," to ",(0,r.kt)("em",{parentName:"li"},"getRotation() : Vector2")," - Gets the entity's rotation"),(0,r.kt)("li",{parentName:"ul"},"Updated function ",(0,r.kt)("em",{parentName:"li"},"addTag(tag: string): boolean")," - The tag must be less than 256 characters"),(0,r.kt)("li",{parentName:"ul"},"Updated method ",(0,r.kt)("em",{parentName:"li"},"kill")," to return boolean instead of void. If return value is true, entity can be killed, otherwise false"),(0,r.kt)("li",{parentName:"ul"},"Added interface ",(0,r.kt)("em",{parentName:"li"},"EntityApplyDamageOptions"),". Additional options about the source of damage to use as input in ",(0,r.kt)("em",{parentName:"li"},"applyDamage")),(0,r.kt)("li",{parentName:"ul"},"Added interface ",(0,r.kt)("em",{parentName:"li"},"EntityApplyDamageByProjectileOptions"),". Additional options about the source of damage to use as input in ",(0,r.kt)("em",{parentName:"li"},"applyDamage")," in case of projectile damage",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Updated method ",(0,r.kt)("em",{parentName:"li"},"applyDamage"),". Renamed parameter ",(0,r.kt)("em",{parentName:"li"},"source")," to ",(0,r.kt)("em",{parentName:"li"},"options"),". Parameter type also changed from ",(0,r.kt)("em",{parentName:"li"},"EntityDamageSource")," to ",(0,r.kt)("em",{parentName:"li"},"EntityApplyDamageOptions | EntityApplyDamageByProjectileOptions")))),(0,r.kt)("li",{parentName:"ul"},"SimulatedPlayer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Changed function ",(0,r.kt)("em",{parentName:"li"},"getHeadRotation")," to ",(0,r.kt)("em",{parentName:"li"},"getHeadRotation() : Vector2")," - Gets the simulated players head rotation"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"TitleDisplayOptions")," will now accept floating point values"),(0,r.kt)("li",{parentName:"ul"},"Added new ",(0,r.kt)("em",{parentName:"li"},"WorldSoundOptions")," and ",(0,r.kt)("em",{parentName:"li"},"PlayerSoundOptions")," interface types for use with the ",(0,r.kt)("em",{parentName:"li"},"playSound")," and ",(0,r.kt)("em",{parentName:"li"},"player.playSound")," respectively",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"playSound")," now requires a ",(0,r.kt)("em",{parentName:"li"},"location")," argument"),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("em",{parentName:"li"},"playMusic")," and ",(0,r.kt)("em",{parentName:"li"},"queueMusic"),", an error will now be thrown if ",(0,r.kt)("em",{parentName:"li"},"volume")," is less than ",(0,r.kt)("em",{parentName:"li"},"0.0")),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("em",{parentName:"li"},"playMusic")," and ",(0,r.kt)("em",{parentName:"li"},"queueMusic"),", an error will now be thrown if ",(0,r.kt)("em",{parentName:"li"},"fade")," is less than ",(0,r.kt)("em",{parentName:"li"},"0.0")),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("em",{parentName:"li"},"playSound"),", an error will now be thrown if ",(0,r.kt)("em",{parentName:"li"},"pitch")," is less than ",(0,r.kt)("em",{parentName:"li"},"0.01")),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("em",{parentName:"li"},"playSound"),", an error will now be thrown if ",(0,r.kt)("em",{parentName:"li"},"volume")," is less than ",(0,r.kt)("em",{parentName:"li"},"0.0")),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("em",{parentName:"li"},"playSound"),", an error will now be thrown if ",(0,r.kt)("em",{parentName:"li"},"pitch")," is less than ",(0,r.kt)("em",{parentName:"li"},"0.01")),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("em",{parentName:"li"},"playSound"),", an error will now be thrown if ",(0,r.kt)("em",{parentName:"li"},"volume")," is less than ",(0,r.kt)("em",{parentName:"li"},"0.0")))),(0,r.kt)("li",{parentName:"ul"},'Removed "dye',"_",'powder" item component'),(0,r.kt)("li",{parentName:"ul"},"Entity objects now persist across dimension changes and chunk reloading. This means that if you have a reference to an invalid Entity, it will become usable once the Entity has been transferred or reloaded. You can check whether an Entity is loaded or unloaded by reading its ",(0,r.kt)("em",{parentName:"li"},"lifetimeState")," property"),(0,r.kt)("li",{parentName:"ul"},"Added read-only property ",(0,r.kt)("em",{parentName:"li"},"lifetimeState"),' - Returns the lifetime state of the Entity. Valid values include "loaded" and unloaded"'),(0,r.kt)("li",{parentName:"ul"},"ItemDefinitionTriggeredEvent",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Renamed property ",(0,r.kt)("em",{parentName:"li"},"item")," to ",(0,r.kt)("em",{parentName:"li"},"itemStack")))),(0,r.kt)("li",{parentName:"ul"},"ItemStartUseOnEvent",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Renamed property ",(0,r.kt)("em",{parentName:"li"},"item")," to ",(0,r.kt)("em",{parentName:"li"},"itemStack")),(0,r.kt)("li",{parentName:"ul"},"Replaced function ",(0,r.kt)("em",{parentName:"li"},"getBlockLocation")," with read-only ",(0,r.kt)("em",{parentName:"li"},"property")," ",(0,r.kt)("em",{parentName:"li"},"blockLocation: Vector3")),(0,r.kt)("li",{parentName:"ul"},"Removed function ",(0,r.kt)("em",{parentName:"li"},"getBuildBlockLocation")))),(0,r.kt)("li",{parentName:"ul"},"ItemStopUseOnEvent",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Renamed property ",(0,r.kt)("em",{parentName:"li"},"item")," to ",(0,r.kt)("em",{parentName:"li"},"itemStack")),(0,r.kt)("li",{parentName:"ul"},"Replaced function ",(0,r.kt)("em",{parentName:"li"},"getBlockLocation")," with read-only ",(0,r.kt)("em",{parentName:"li"},"property")," ",(0,r.kt)("em",{parentName:"li"},"blockLocation: Vector3")))),(0,r.kt)("li",{parentName:"ul"},"ItemUseEvent",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Renamed property ",(0,r.kt)("em",{parentName:"li"},"item")," to ",(0,r.kt)("em",{parentName:"li"},"itemStack")))),(0,r.kt)("li",{parentName:"ul"},"ItemUseOnEvent",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Renamed property ",(0,r.kt)("em",{parentName:"li"},"item")," to ",(0,r.kt)("em",{parentName:"li"},"itemStack")),(0,r.kt)("li",{parentName:"ul"},"Replaced function ",(0,r.kt)("em",{parentName:"li"},"getBlockLocation")," with read-only property ",(0,r.kt)("em",{parentName:"li"},"blockLocation: Vector3")),(0,r.kt)("li",{parentName:"ul"},"Replaced properties ",(0,r.kt)("em",{parentName:"li"},"faceLocationX")," and ",(0,r.kt)("em",{parentName:"li"},"faceLocation")," with read-only property ",(0,r.kt)("em",{parentName:"li"},"faceLocation: Vector2")))),(0,r.kt)("li",{parentName:"ul"},"BlockHitInformation",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Replaced properties ",(0,r.kt)("em",{parentName:"li"},"faceLocationX")," and ",(0,r.kt)("em",{parentName:"li"},"faceLocation")," with read-only property ",(0,r.kt)("em",{parentName:"li"},"faceLocation: Vector2"))))))))}s.isMDXComponent=!0}}]);